# 구현 계획

- [x] 1. Next.js 프로젝트 초기 설정 및 기본 구조 구축
  - Next.js 15 프로젝트 생성 (App Router 사용)
  - TypeScript, Tailwind CSS, ESLint, Prettier 설정
  - Shadcn/ui 컴포넌트 라이브러리 설치 및 설정
  - 기본 폴더 구조 생성 (app, components, lib, server 등)
  - 환경 변수 설정 (.env.local, .env.example)
  - _요구사항: 요구사항 6.1, 6.4_

- [x] 2. Supabase 설정 및 데이터베이스 구축
  - [x] 2.1 Supabase 프로젝트 설정
    - Supabase 프로젝트 생성 및 환경 변수 설정
    - Supabase 클라이언트 설정 (lib/supabase.ts)
    - Row Level Security (RLS) 정책 설정
    - _요구사항: 요구사항 8.1, 8.2_

  - [x] 2.2 데이터베이스 스키마 구현
    - Supabase에서 테이블 생성 (users, invitations, rsvp_responses, invitation_views, templates)
    - Prisma 스키마 파일 작성 (Supabase 연동)
    - 초기 템플릿 데이터 시드 작성
    - _요구사항: 요구사항 1.1, 7.1_

- [x] 3. tRPC 설정 및 기본 API 구조 구축
  - [x] 3.1 tRPC 서버 설정
    - tRPC 서버 설정 (server/api/trpc.ts)
    - 루트 라우터 생성 (server/api/root.ts)
    - Next.js API 핸들러 설정 (app/api/trpc/[trpc]/route.ts)
    - _요구사항: 요구사항 6.1_

  - [x] 3.2 tRPC 클라이언트 설정
    - tRPC 클라이언트 설정 (lib/trpc.ts)
    - TanStack Query와 tRPC 통합 설정
    - 타입 안전한 API 호출 환경 구축
    - _요구사항: 요구사항 6.1_

- [ ] 4. Supabase Auth 인증 시스템 구현
  - [x] 4.1 Supabase Auth 설정
    - Supabase Auth 설정 및 소셜 로그인 프로바이더 연동 (카카오, 구글)
    - 인증 미들웨어 및 세션 관리 구현
    - 사용자 프로필 관리 기능 구현
    - _요구사항: 요구사항 7.1, 7.2_

  - [x] 4.2 인증 관련 tRPC 라우터 구현
    - 인증 라우터 작성 (server/api/routers/auth.ts)
    - 회원가입, 로그인, 로그아웃, 계정 삭제 프로시저 구현
    - 보호된 프로시저 미들웨어 구현
    - _요구사항: 요구사항 7.1, 7.2, 7.4, 8.3_

  - [x] 4.3 인증 UI 컴포넌트 구현
    - 로그인/회원가입 페이지 구현 (app/(auth)/login, signup)
    - 소셜 로그인 버튼 컴포넌트 구현
    - 인증 상태 관리 훅 구현 (hooks/useAuth.ts)
    - _요구사항: 요구사항 7.1, 7.2_

- [x] 5. 템플릿 시스템 구현
  - [x] 5.1 템플릿 데이터 모델 및 tRPC 라우터 구현
    - 템플릿 라우터 작성 (server/api/routers/template.ts)
    - 템플릿 CRUD 프로시저 구현
    - 템플릿 카테고리별 분류 및 조회 로직 구현
    - 템플릿 렌더링 엔진 구현 (플레이스홀더 동적 치환)
    - _요구사항: 요구사항 1.1_

  - [x] 5.2 템플릿 선택 UI 구현
    - 템플릿 카테고리별 필터링 기능 구현
    - 템플릿 미리보기 및 선택 컴포넌트 작성
    - 반응형 그리드 레이아웃으로 템플릿 목록 표시
    - 최소 15개 기본 템플릿 데이터 생성 및 업로드
    - _요구사항: 요구사항 1.1, 6.1_

- [ ] 6. 청첩장 편집 기능 구현 (모듈식 블록 시스템)
  - [ ] 6.1 블록 기반 편집 시스템 설계
    - 블록 타입 정의 (Header, Content, Image, Contact, Location, RSVP 등)
    - 블록 컴포넌트 인터페이스 및 공통 속성 정의
    - 블록 순서 관리 및 상태 구조 설계
    - 편집 상태 관리 및 자동 저장 기능 구현
    - _요구사항: 요구사항 1.2, 1.3_

  - [ ] 6.2 핵심 블록 컴포넌트 구현
    - HeaderBlock: 신랑신부 이름, 날짜 표시 블록
    - ContentBlock: 자유 텍스트 입력 블록
    - ImageBlock: 이미지 업로드 및 표시 블록
    - ContactBlock: 연락처 정보 표시 블록
    - LocationBlock: 장소 정보 및 지도 블록
    - RsvpBlock: RSVP 버튼 및 폼 블록
    - _요구사항: 요구사항 1.2, 1.3_

  - [ ] 6.3 블록 편집 인터페이스 구현
    - 블록별 인라인 편집 모드 구현
    - 블록 추가/삭제 버튼 및 액션 구현
    - 블록 순서 변경 기능 (위/아래 이동)
    - 블록별 스타일 옵션 (색상, 폰트, 정렬 등)
    - _요구사항: 요구사항 1.2, 1.3_

  - [ ] 6.4 블록 관리 시스템 구현
    - 블록 추가 팔레트 (사용 가능한 블록 목록)
    - 블록 구성 저장/불러오기 기능
    - 블록 설정 모달 (고급 옵션)
    - 실시간 미리보기 업데이트 기능
    - _요구사항: 요구사항 1.2, 1.3_

  - [ ] 6.5 Supabase Storage 이미지 업로드 기능 구현
    - Supabase Storage 버킷 설정 및 정책 구성
    - 이미지 업로드 tRPC 프로시저 구현
    - 이미지 크기 조정 및 최적화 로직 구현 (Sharp 사용)
    - ImageBlock 컴포넌트와 연동한 이미지 업로드 기능
    - _요구사항: 요구사항 1.4_

- [ ] 7. 결혼식 정보 입력 기능 구현
  - [x] 7.1 결혼식 정보 폼 컴포넌트 구현
    - React Hook Form과 Zod를 사용한 폼 유효성 검증
    - 날짜, 시간, 장소, 연락처 입력 폼 작성
    - 추가 정보 필드(드레스코드, 주차 안내 등) 구현
    - 폼 에러 처리 및 사용자 피드백 구현
    - _요구사항: 요구사항 2.1, 2.4_

  - [ ] 7.2 카카오맵 API 연동 기능 구현
    - 카카오맵 API 키 설정 및 지도 컴포넌트 구현
    - 주소 입력 시 자동 좌표 변환 및 지도 마커 표시
    - 길찾기 버튼 및 외부 지도 앱 연동 기능 구현
    - 모바일 환경에서의 지도 최적화
    - _요구사항: 요구사항 2.2_

  - [ ] 7.3 RSVP 설정 기능 구현
    - RSVP 활성화/비활성화 토글 및 마감일 설정 UI 구현
    - RSVP 설정 저장 및 업데이트 로직 구현
    - RSVP 설정에 따른 청첩장 표시 조건부 렌더링
    - _요구사항: 요구사항 2.3_

- [ ] 8. 청첩장 CRUD 및 관리 기능 구현
  - [ ] 8.1 청첩장 tRPC 라우터 구현
    - 청첩장 라우터 작성 (server/api/routers/invitation.ts)
    - 청첩장 생성, 조회, 수정, 삭제 프로시저 구현
    - 사용자별 청첩장 목록 조회 및 페이지네이션 구현
    - 청첩장 데이터 유효성 검증 로직 구현
    - _요구사항: 요구사항 1.1, 1.2, 1.3, 1.4, 2.1, 2.2, 2.3, 2.4, 7.3_

  - [ ] 8.2 고유 URL 생성 및 관리 구현
    - 8자리 고유 코드 생성 알고리즘 구현
    - 단축 URL 생성 및 중복 검사 로직 구현
    - 공개 청첩장 조회 프로시저 구현
    - URL 코드와 청첩장 매핑 관리
    - _요구사항: 요구사항 3.1_

- [ ] 9. 청첩장 공유 기능 구현
  - [ ] 9.1 공유 모달 컴포넌트 구현
    - 카카오톡, 문자, 이메일, URL 복사 공유 옵션 구현
    - Web Share API 활용한 네이티브 공유 기능 구현
    - 각 플랫폼별 공유 메시지 템플릿 작성
    - 공유 성공/실패 피드백 UI 구현
    - _요구사항: 요구사항 3.2_

  - [ ] 9.2 공개 청첩장 조회 페이지 구현
    - 고유 코드로 청첩장 조회하는 공개 페이지 구현 (app/invitation/[code])
    - 모바일 최적화된 청첩장 뷰어 컴포넌트 작성
    - 청첩장 조회 로그 기록 기능 구현
    - SEO 최적화 및 Open Graph 메타 태그 설정
    - _요구사항: 요구사항 3.3, 3.4_

- [ ] 10. RSVP 기능 구현
  - [ ] 10.1 RSVP tRPC 라우터 구현
    - RSVP 라우터 작성 (server/api/routers/rsvp.ts)
    - RSVP 제출, 응답 목록 조회, 통계 프로시저 구현
    - 중복 제출 방지 로직 구현
    - 데이터 내보내기 프로시저 구현
    - _요구사항: 요구사항 4.1, 4.2, 4.3, 4.4, 5.4_

  - [ ] 10.2 RSVP 폼 컴포넌트 구현
    - 참석/불참석 선택 및 동반자 수 입력 폼 작성
    - 축하 메시지 입력 기능 (최대 200자 제한) 구현
    - 폼 유효성 검증 및 제출 처리 구현
    - 제출 완료 확인 페이지 및 입력 내용 요약 표시
    - _요구사항: 요구사항 4.1, 4.2, 4.3, 4.4_

- [ ] 11. 관리 대시보드 구현
  - [ ] 11.1 통계 대시보드 컴포넌트 구현
    - 참석 확정/불참/미응답 인원 통계 표시
    - 총 방문자 수 및 읽음 확인 현황 차트 구현
    - 실시간 데이터 업데이트 기능 구현 (Supabase Realtime)
    - 반응형 대시보드 레이아웃 구현
    - _요구사항: 요구사항 5.1, 5.2_

  - [ ] 11.2 하객 목록 관리 기능 구현
    - 하객 응답 목록 테이블 컴포넌트 구현
    - 필터링 및 정렬 기능 (참석 여부, 응답 시간별) 구현
    - 하객별 상세 정보 모달 구현
    - 검색 기능 및 페이지네이션 구현
    - _요구사항: 요구사항 5.3_

  - [ ] 11.3 데이터 내보내기 기능 구현
    - Excel/CSV 파일 생성 로직 구현
    - 다운로드 버튼 및 파일 생성 진행 상태 표시
    - 내보낼 데이터 항목 선택 기능 구현
    - 파일 다운로드 최적화 및 에러 처리
    - _요구사항: 요구사항 5.4_

- [ ] 12. 보안 및 성능 최적화 구현
  - [ ] 12.1 보안 강화 구현
    - Supabase RLS 정책 세밀 조정
    - 입력 데이터 검증 및 XSS 방지 로직 구현 (Zod 스키마 활용)
    - Rate Limiting 구현 (Vercel Edge Functions 활용)
    - CSRF 보호 및 보안 헤더 설정
    - _요구사항: 요구사항 8.1, 8.2, 8.4_

  - [ ] 12.2 파일 업로드 보안 강화
    - Supabase Storage 정책 설정 (파일 타입, 크기 제한)
    - 이미지 메타데이터 제거 및 파일명 무작위화 구현
    - 파일 업로드 진행 상태 및 에러 처리 구현
    - _요구사항: 요구사항 8.1, 8.2_

  - [ ] 12.3 성능 최적화 구현
    - Next.js 이미지 최적화 및 지연 로딩 구현
    - 코드 스플리팅 및 번들 크기 최적화
    - Supabase 쿼리 최적화 및 캐싱 전략 구현
    - 페이지 로드 성능 최적화 (3초 이내 목표)
    - _요구사항: 요구사항 9.1, 9.2_

- [ ] 13. PWA 및 모바일 최적화 구현
  - [ ] 13.1 PWA 설정 구현
    - Service Worker 및 Web App Manifest 파일 작성
    - 오프라인 기능 (청첩장 보기, 임시 저장) 구현
    - 앱 설치 프롬프트 및 홈 화면 추가 기능 구현
    - 푸시 알림 기능 구현 (선택사항)
    - _요구사항: 요구사항 6.3_

  - [ ] 13.2 반응형 디자인 완성
    - 모든 컴포넌트의 모바일/태블릿/데스크톱 반응형 스타일 구현
    - 터치 친화적 UI 요소 (버튼 크기, 스와이프 제스처) 구현
    - iOS Safari, Android Chrome 브라우저 호환성 테스트 및 수정
    - 다크 모드 지원 구현 (선택사항)
    - _요구사항: 요구사항 6.1, 6.2, 6.4_

- [ ] 14. 테스트 구현
  - [ ] 14.1 테스트 환경 구축 및 단위 테스트 작성
    - Jest, React Testing Library, Vitest 설정
    - tRPC 프로시저 단위 테스트 작성
    - 주요 컴포넌트 및 유틸리티 함수 단위 테스트 작성
    - 테스트 커버리지 80% 이상 달성
    - _요구사항: 모든 요구사항_

  - [ ] 14.2 통합 테스트 작성
    - Supabase 연동 통합 테스트 작성
    - 인증 플로우 통합 테스트 작성
    - 청첩장 생성부터 RSVP까지 전체 플로우 통합 테스트 작성
    - _요구사항: 모든 요구사항_

  - [ ] 14.3 E2E 테스트 작성
    - Playwright를 사용한 주요 사용자 시나리오 E2E 테스트 작성
    - 다양한 브라우저 및 디바이스에서의 호환성 테스트 작성
    - 성능 테스트 및 Lighthouse 점수 검증 테스트 작성
    - _요구사항: 요구사항 6.4, 9.1, 9.2_

- [ ] 15. Vercel 배포 및 운영 설정
  - [ ] 15.1 Vercel 배포 설정
    - Vercel 프로젝트 설정 및 환경 변수 구성
    - 자동 배포 파이프라인 설정 (GitHub 연동)
    - 도메인 설정 및 SSL 인증서 자동 적용
    - 프리뷰 배포 및 프로덕션 배포 환경 분리
    - _요구사항: 요구사항 8.1, 9.1_

  - [ ] 15.2 모니터링 및 분석 설정
    - Vercel Analytics 설정
    - 에러 추적 도구 연동 (Sentry)
    - 성능 모니터링 및 알림 설정
    - 사용자 행동 분석 도구 연동 (선택사항)
    - _요구사항: 요구사항 9.4_

  - [ ] 15.3 SEO 및 메타데이터 최적화
    - 각 페이지별 SEO 메타데이터 설정
    - Open Graph 및 Twitter Card 메타 태그 구현
    - 사이트맵 및 robots.txt 생성
    - 구조화된 데이터 마크업 추가
    - _요구사항: 요구사항 3.3_
